TODO list

Shaders / Bind groups
bind groups - find a universal way to map object names in both webGL and WebGPU
groupLayout - do we need them still?
auto generating bind groups based on inspecting the elements passed in. This would mean we can keep the names and auto generate them with some over head.
investigae write buffers - can we do it faster? -> 
no support for generic buffers as a resource just yer

[ ] - Triangle list is the only draw call currently
[ ] - Geometry with no indexed buffers
[ ] - State object - that maps to pipe
[ ] - stencil8 - make it a depth texture for future 3d!

- [ ] loop through and collect updates!
- [ ] directly expose the array to be written into, save a copy op!
- [ ] error thrown when we render nothing
- [ ] keep command encoders around from frame to frame?
- [ ] 
batching
[x] - compute??? - will tery this again later :D
[x] - blend modes
[x] - test the 'slow flow'
[x] - optimise all the new stuff - no new objects in the 'hot' code
[x] - BUG - render only three of the four things!
[x] - have a single place for maxTextures
[x] - test more than 16 merged textures?? - 16 is the max!
[x] - create an empty texture for the batcher
[x] - pool buffer arrays (new each time)
[ ] - try ring buffer for frame to frame uploads?
[x] - do function renaming
[ ] - try an array instead of structured buffer
[x] - upload a part of a buffer
[ ] - make systems access the encoder
[ ] - make visibility work (naive - a rebuild)
[x] - make texture swaps work (naive - a rebuild)
[x] - make smart texture swaps
[x] - make visibility part of shader of indexes?
[x] - only update to buffer if the thing changes
[ ] - keep previous batch buffer as a place to copy stuff
[x] - experiment with a global matrix buffer
[ ] - Mesh - make sure we don't bind global multiple times
[x] - make sure that batch is set correctly when updating
[ ] - make context device global???
[ ] - remove auto?
[ ] - compute - only update the vertex each frame?
[x] - resize a buffer without actually setting the data!
[ ] - blendModes should optionally be an array in state
[ ] - elements / batchable objects parameters - give things a consistent name
[ ] - uid or id .. pick one and make it uniform!
[x] - upload ONLY if the batch is dirty
[x] - use batchablebject or element or renderable - line it up!
[ ] - fix up the id for texture - it should be the source id?
[x] - fix who should update the renderable - batch or stage?
[ ] - tint
[ ] - makes sure texture swap works on mesh
[ ] - listen for geometry changes and the batch too

[ ] - Render textures!
[ ] - add writemask to state
[ ] - blendMode should be part of state id combine into our number!
[x] - Texture batching needs empty textures
[ ] - be smart about the last batch of textures - preserver their locations?
[ ] - compare inheritance vs interface on renderables
[x] - make sure that mesh renderer is updated to new batch style
[x] - currentBatcher - needs better naming
pipeline
[ ] - move some pipeline function to the shader system
[ ] - should we have a 'start instruction? or only set a pipe / vertex caching?
[ ] - add GC for the binding group cache (first test if we need a cache at all?)
[ ] - stop object creation in texture batcher
[ ] - seperate batcher from a renderer...  
[ ] - remove render session.. use the render group
[ ] - passing renderer around a lot...
[ ] - move the update transform out of the stage
[ ] - see if its worth removing out for shared code in the meh and sprite renderer

graphics
[ ] - reuse mesh by having an id generated by the graphics
[ ] - let the graphics be reusable

[ ] - make tint and blendModes inheritable
[ ] - go through and make private vars private
[ ] - only update when something changes
[ ] - fix up the graphics pipeline issue.. 
[ ] - keep a renderable seperate?? so it can be reused?? 
